define(function(){function a(a){var b=$(a);b.click(function(){});var c=$("html");c.mousedown(function(c){$.contains(a,c.target)||b.hide()})}var b=function(b){var c=this,d={direction:"align",html:""};$.extend(d,b),this.options=d,this.render(),a(c.el)};return b.prototype.render=function(){var a=this.options,b=$("<div></div>");this.el=b[0];var c={position:"absolute","z-index":"999"};b.css(c),b.appendTo($(document.body)),b.append(a.content),b.hide()},b.prototype.show=function(a){var b=this,c=b.options,d=$(b.el),e=d.outerWidth(),f=d.outerHeight(),g=$(a).offset().top,h=$(a).offset().left,i=parseInt($(a).outerHeight()),j=parseInt($(a).outerWidth()),k=$(document),l=k.outerWidth(),m=k.outerHeight(),n=h+j,o=g+i;"align"===c.direction?e>l-n?f>m-g?d.css({top:o-f+"px",left:h-e+"px"}).show():d.css({top:g+"px",left:h-e+"px"}).show():f>m-g?d.css({top:o-f+"px",left:n+"px"}).show():d.css({top:g+"px",left:n+"px"}).show():d.css({top:o+"px",left:h+"px"}).show()},b.prototype.showAlign=function(){},b.prototype.hide=function(){var a=this,b=$(a.el);b.hide()},b.prototype.redraw=function(a){var b=this,c=$(b.el);c.html(a)},b});